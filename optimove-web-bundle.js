!function(){var t={673:function(t){function e(){return new DOMException("The request is not allowed","NotAllowedError")}t.exports=async function(t){try{await async function(t){if(!navigator.clipboard)throw e();return navigator.clipboard.writeText(t)}(t)}catch(n){try{await async function(t){const n=document.createElement("span");n.textContent=t,n.style.whiteSpace="pre",n.style.webkitUserSelect="auto",n.style.userSelect="all",document.body.appendChild(n);const r=window.getSelection(),o=window.document.createRange();r.removeAllRanges(),o.selectNode(n),r.addRange(o);let i=!1;try{i=window.document.execCommand("copy")}finally{r.removeAllRanges(),window.document.body.removeChild(n)}if(!i)throw e()}(t)}catch(t){throw t||n||e()}}}},77:function(t,e,n){"use strict";var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([t.id,".kumulos-rating{display:flex;height:20px;font-size:16px;align-items:center;margin-top:3px}.kumulos-rating .kumulos-rating-star{position:relative}.kumulos-rating .kumulos-rating-star .kumulos-rating-halfstar{position:absolute;left:0;top:0;width:50%;overflow:hidden}.kumulos-rating .kumulos-rating-count{font-size:12px;margin-left:3px}",""]),e.A=s},39:function(t,e,n){"use strict";var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([t.id,'@keyframes kumulos-anim-shake{10%,90%{transform:translate3d(-1px, 0, 0)}20%,80%{transform:translate3d(2px, 0, 0)}30%,50%,70%{transform:translate3d(-2px, 0, 0)}40%,60%{transform:translate3d(2px, 0, 0)}}@keyframes kumulos-anim-fade-in{0%{opacity:0}100%{opacity:1}}@keyframes kumulos-reveal-left{0%{opacity:0;transform:translate(10px, -50%)}100%{opacity:1;transform:translate(0px, -50%)}}@keyframes kumulos-reveal-right{0%{opacity:0;transform:translate(-10px, -50%)}100%{opacity:1;transform:translate(0px, -50%)}}@keyframes kumulos-toast-in-out{0%{opacity:0;transform:translate3d(-50%, 100%, 0)}100%{opacity:1;transform:translate3d(-50%, 0, 0)}}@keyframes kumulos-slide-down{0%{transform:translate3d(0, -100%, 0)}100%{transform:translate3d(0, 0, 0)}}@keyframes kumulos-slide-up{0%{transform:translate3d(0, 100%, 0)}100%{transform:translate3d(0, 0, 0)}}.kumulos-tooltip-parent .kumulos-tooltip{display:none}.kumulos-tooltip-parent:hover .kumulos-tooltip{display:block}.kumulos-tooltip{background:#222;position:absolute;top:50%;padding:8px 12px;font:14px helvetica,sans-serif;color:#eee;border-radius:6px;white-space:nowrap;z-index:1100;pointer-events:none;transform:translateY(-50%);will-change:opacity,transform}.kumulos-tooltip:after{content:"";width:0;height:0;position:absolute;top:50%;right:100%;border:solid rgba(0,0,0,0);border-width:8px;margin-top:-8px}.kumulos-tooltip-right{left:calc(100% + 12px);animation:kumulos-reveal-right .2s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-tooltip-right:after{border-right-color:#222;right:100%}.kumulos-tooltip-left{right:calc(100% + 12px);animation:kumulos-reveal-left .2s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-tooltip-left:after{border-left-color:#222;left:100%}.kumulos-toast{display:inline-block;position:fixed;bottom:0;left:50%;transform:translateX(-50%);background:#222;z-index:1100;padding:12px;font-size:16px;font-family:helvetica,sans-serif;color:#eee;border-radius:8px 8px 0 0;animation:kumulos-toast-in-out .25s cubic-bezier(0.23, 1, 0.32, 1)}.kumulos-prompt{box-sizing:border-box;z-index:1000}.kumulos-prompt *,.kumulos-prompt *:before,.kumulos-prompt *:after{box-sizing:inherit}.kumulos-action-button{border:none;margin-left:10px;padding:7px 10px;min-width:100px;text-transform:uppercase;font-size:14px;font-weight:600}.kumulos-action-button:hover{cursor:pointer}.kumulos-action-button-cancel{background:none;color:#555}.kumulos-action-button-cancel:hover{background:#eee}.kumulos-action-button-confirm{border-radius:3px;box-shadow:1px 3px 3px rgba(0,0,0,.54);background:#4c88e0;color:#fff}.kumulos-action-button-confirm:hover{opacity:.8}.kumulos-checkbox-container{display:block;position:relative;padding-left:30px;margin-bottom:12px;cursor:pointer;user-select:none;line-height:20px;font-size:.9em;font-weight:bold}.kumulos-checkbox-container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.kumulos-checkbox{box-sizing:border-box;position:absolute;top:0;left:0;height:20px;width:20px;border-radius:3px;border:1px solid #ddd}.kumulos-checkbox-container:hover input~.kumulos-checkbox{border-color:#aaa;display:block}.kumulos-checkbox-container:hover input~.kumulos-checkbox:after{display:block;border-color:#aaa;box-shadow:none}.kumulos-checkbox:after{content:"";position:absolute;display:none}.kumulos-checkbox-container input:checked~.kumulos-checkbox{border-color:#aaa}.kumulos-checkbox-container input:checked~.kumulos-checkbox:after{display:block;border-color:#222;box-shadow:2px 2px 2px 0px rgba(0,0,0,.3)}.kumulos-checkbox-container .kumulos-checkbox:after{left:10px;top:-7px;width:8px;height:20px;border:solid #000;border-width:0 3px 3px 0;transform:rotate(45deg)}.kumulos-banner-container{display:flex;flex-direction:row;flex-flow:wrap;position:fixed;left:0;width:100%;min-height:80px;padding:10px;font-family:helvetica,sans-serif;backface-visibility:hidden;box-shadow:0 0 3px 1px rgba(0,0,0,.54)}.kumulos-banner-container.kumulos-prompt-position-top{top:0;animation:kumulos-slide-down .4s ease}.kumulos-banner-container.kumulos-prompt-position-bottom{bottom:0;top:unset;animation:kumulos-slide-up .4s ease}@media only screen and (min-device-width: 480px){.kumulos-banner-container{flex-flow:initial}}.kumulos-banner-icon{width:65px;height:65px;margin-right:10px}.kumulos-banner-content{display:flex;flex-direction:column;flex:1}.kumulos-banner-header{display:flex;font-size:12px;line-height:14px}.kumulos-banner-header h1{font-size:inherit;font-weight:bold;margin:0 0 3px 0}@media only screen and (min-device-width: 480px){.kumulos-banner-header{font-size:18px}}.kumulos-banner-body{display:flex;flex-grow:2;align-items:flex-start;font-size:12px;line-height:14px;overflow:hidden;margin-top:10px}@media only screen and (min-device-width: 480px){.kumulos-banner-body{font-size:14px}}.kumulos-banner-actions{display:flex;align-self:center;justify-self:flex-end;width:100%;justify-content:flex-end;margin-top:10px}@media only screen and (min-device-width: 480px){.kumulos-banner-actions{width:auto;margin-top:0}}.kumulos-banner-compact .kumulos-banner-body{margin-top:0}.kumulos-banner-compact .kumulos-banner-actions{width:auto;margin-top:0}.kumulos-banner-compact .kumulos-banner-close{display:flex;justify-content:center;align-items:center;font-size:18px;font-weight:bold;margin-right:10px}@supports(padding: max(0px)){.kumulos-safe-area-inset-pad-left{padding-left:max(10px, env(safe-area-inset-left))}.kumulos-safe-area-inset-pad-right{padding-right:max(10px, env(safe-area-inset-right))}.kumulos-safe-area-inset-pad-top{padding-top:max(10px, env(safe-area-inset-top))}.kumulos-safe-area-inset-pad-bottom{padding-bottom:max(10px, env(safe-area-inset-bottom))}}.kumulos-bell-container{position:fixed}.kumulos-bell-container-bottom-left{bottom:15px;left:15px}.kumulos-bell-container-bottom-right{bottom:15px;right:15px}.kumulos-bell{transition:transform .2s cubic-bezier(0.23, 1, 0.32, 1),box-shadow .2s cubic-bezier(0.23, 1, 0.32, 1);border-radius:100%;border-color:#fff;background:#4c88e0;box-shadow:1px 2px 2px 0 rgba(0,0,0,.54);width:60px;height:60px;padding:10px;transform:scale(0.9);cursor:pointer;animation:kumulos-anim-fade-in .2s ease-in;backface-visibility:hidden}.kumulos-bell:hover{transform:scale(1);box-shadow:1px 2px 3px 1px rgba(0,0,0,.54)}.kumulos-bell:active{transform:scale(0.8);box-shadow:1px 2px 2px 0 rgba(0,0,0,.54)}.kumulos-bell svg{fill:#fff;animation:kumulos-anim-shake .4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;animation-delay:.3s}.kumulos-bell:before{content:"";display:block;width:85%;height:85%;border:solid 1px;border-radius:100%;border-color:inherit;position:absolute;top:0;left:0;margin:7.5% 0 0 7.5%}.kumulos-bell-inner{border-radius:100%}.kumulos-channel-dialog-container,.kumulos-alert-container{position:fixed;top:0;left:0;width:100%;height:100%;max-height:100%;padding:20px;display:flex;flex-direction:row;flex-wrap:wrap;font-family:helvetica,sans-serif;animation:kumulos-anim-fade-in .2s ease-in;backface-visibility:hidden}@media only screen and (min-device-width: 480px){.kumulos-channel-dialog-container,.kumulos-alert-container{left:50%;width:500px;min-height:250px;margin-left:-250px;box-shadow:0 0 3px 1px rgba(0,0,0,.54);height:auto}.kumulos-channel-dialog-container.kumulos-prompt-position-top-center,.kumulos-alert-container.kumulos-prompt-position-top-center{border-radius:0 0 3px 3px}.kumulos-channel-dialog-container.kumulos-prompt-position-center,.kumulos-alert-container.kumulos-prompt-position-center{border-radius:3px;top:120px}}.kumulos-channel-dialog-icon,.kumulos-alert-icon{order:2;width:60px;height:60px;align-self:flex-start}.kumulos-channel-dialog-content,.kumulos-alert-content{display:flex;order:1;flex-direction:column;flex:1;margin-right:10px}.kumulos-channel-dialog-header,.kumulos-alert-header{display:flex;font-size:18px;margin-bottom:20px}.kumulos-channel-dialog-header h1,.kumulos-alert-header h1{font-size:inherit;font-weight:400;margin:0}.kumulos-channel-dialog-body,.kumulos-alert-body{flex:1;white-space:pre-wrap;overflow-y:auto}.kumulos-channel-dialog-actions,.kumulos-alert-actions{display:flex;justify-content:flex-end;margin-top:20px;order:3;width:100%;height:30px;align-self:flex-end}.kumulos-channel-list-container{margin:20px 0}body.kumulos-background-mask-blur{overflow:hidden}.kumulos-background-mask-blur>*:not(.kumulos-prompt):not(.kumulos-overlay):not(.kumulos-background-mask){filter:blur(3px)}.kumulos-background-mask{position:fixed;top:0;left:0;height:100%;width:100%;z-index:900;background-color:rgba(0,0,0,.3);display:block}.kumulos-overlay-blur>*:not(.kumulos-overlay){filter:blur(3px)}.kumulos-overlay{box-sizing:border-box;z-index:2000}.kumulos-overlay *,.kumulos-overlay *:before,.kumulos-overlay *:after{box-sizing:inherit}.kumulos-overlay-strip{display:flex;box-shadow:0 0 6px 0 rgba(0,0,0,.8);min-height:150px}.kumulos-overlay-strip:before{display:block;content:"";width:calc(500px + 12%);max-width:660px}.kumulos-overlay-content-container{display:flex;max-width:38%;padding:1em;font-size:14px;font-family:helvetica,sans-serif}.kumulos-overlay-content-container *{margin:0}.kumulos-overlay-content-container svg{margin:55px 1.7em 0 0;stroke:none;fill:rgba(0,0,0,.8);flex-shrink:0}.kumulos-overlay-content-container img{width:55px;height:55px;flex-shrink:0}.kumulos-overlay-content-container h3,.kumulos-overlay-content-container p,.kumulos-overlay-content-container a{color:inherit}.kumulos-overlay-content-container h3{font-size:1.3em;font-weight:bold}.kumulos-overlay-content-container a{margin-right:.65em;opacity:.8;text-decoration:none}.kumulos-overlay .kumulos-overlay-content{margin-left:.75em}.kumulos-overlay .kumulos-overlay-content p{margin:.5em 0}.kumulos-overlay .kumulos-silent-overlay-indicator{position:absolute;left:0;top:0;z-index:1}.kumulos-overlay .kumulos-silent-overlay-content-text{max-width:500px;text-align:center;font-size:1.3em;font-family:helvetica,sans-serif}.kumulos-overlay-chrome .kumulos-overlay-strip:before{width:440px}.kumulos-overlay-edge .kumulos-overlay-strip:before{display:none}.kumulos-overlay-edge .kumulos-overlay-strip{position:absolute;bottom:0;width:100%;padding-bottom:60px;justify-content:center}.kumulos-overlay-edge .kumulos-overlay-content-container{min-width:675px}.kumulos-overlay-edge .kumulos-overlay-content-container svg{order:1;transform:rotate(-30deg)}.kumulos-overlay-safari .kumulos-overlay-strip:before{width:calc(50% + 212px);max-width:100%}@media(max-width: 900px){.kumulos-overlay{display:none}}',""]),e.A=s},314:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r="undefined"!=typeof e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var u=0;u<this.length;u++){var a=this[u][0];null!=a&&(s[a]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&s[l[0]]||("undefined"!=typeof i&&("undefined"==typeof l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},601:function(t){"use strict";t.exports=function(t){return t[1]}},72:function(t){"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},s=[],u=0;u<t.length;u++){var a=t[u],c=r.base?a[0]+r.base:a[0],l=i[c]||0,p="".concat(c," ").concat(l);i[c]=l+1;var f=n(p),h={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==f)e[f].references++,e[f].updater(h);else{var d=o(h,r);r.byIndex=u,e.splice(u,0,{identifier:p,updater:d,references:1})}s.push(p)}return s}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var u=n(i[s]);e[u].references--}for(var a=r(t,o),c=0;c<i.length;c++){var l=n(i[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=a}}},659:function(t){"use strict";var e={};t.exports=function(t,n){var r=function(t){if("undefined"==typeof e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o="undefined"!=typeof n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nc=void 0,function(){"use strict";var t,e=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},i=[typeof Promise,typeof fetch,typeof indexedDB],s={push:function(){var t,e=o([],i,!0);"safari"===a()&&"undefined"==typeof PushManager?e.push(typeof(null===(t=window.safari)||void 0===t?void 0:t.pushNotification)):e.push.apply(e,[typeof Notification,typeof navigator.serviceWorker,typeof PushManager]);return c(e)},ddl:function(){return c(i)}};function u(){return"undefined"==typeof crypto?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})):(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16)}))}function a(){for(var t=navigator.userAgent.toLowerCase(),e=0,n=["edge","firefox","chrome","safari"];e<n.length;e++){var r=n[e];if(t.indexOf(r)>-1)return r}return""}function c(t){return t.reduce((function(t,e){return t&&"undefined"!==e}),!0)}var l=Math.imul||function(t,e){var n=(4194303&t)*(e|=0);return 4290772992&t&&(n+=(4290772992&t)*e|0),0|n};function p(t,e){void 0===e&&(e=0);for(var n=3735928559^e,r=1103547991^e,o=0,i=void 0;o<t.length;o++)i=t.charCodeAt(o),n=l(n^i,2654435761),r=l(r^i,1597334677);return n=l(n^n>>>16,2246822507)^l(r^r>>>13,3266489909),4294967296*(2097151&(r=l(r^r>>>16,2246822507)^l(n^n>>>13,3266489909)))+(n>>>0)}function f(t,e,n){var o;void 0===n&&(n={method:"GET"});var i=null!==(o=n.headers)&&void 0!==o?o:{};return n.headers=r(r({"Content-Type":"application/json",Accept:"application/json"},e?{Authorization:e}:{}),i),fetch(t,n)}var h=function(t){function n(e,n){return t.call(this,"fetch failed: ".concat(e,", ").concat(n))||this}return e(n,t),n}(Error);function d(t,e,n){return f(t,e,n).then((function(t){if(!t.ok)throw new h(t.status,t.statusText);return t.json()}))}function v(t){return new URL(t,location.origin).href}function m(){return/android|iPhone|iPad|iPod|mobile/i.test(navigator.userAgent)}var y,b=function(){function t(t,e){void 0===t&&(t="keyval-store"),void 0===e&&(e="keyval"),this.storeName=e,this._dbp=new Promise((function(n,r){var o=indexedDB.open(t,1);o.onerror=function(){return r(o.error)},o.onsuccess=function(){return n(o.result)},o.onupgradeneeded=function(){o.result.createObjectStore(e)}}))}return t.prototype._withIDBStore=function(t,e){var n=this;return this._dbp.then((function(r){return new Promise((function(o,i){var s=r.transaction(n.storeName,t);s.oncomplete=function(){return o()},s.onabort=s.onerror=function(){return i(s.error)},e(s.objectStore(n.storeName))}))}))},t}();function _(){return y||(y=new b),y}var g=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},k=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},w=new b("kumulos","default");function x(t){return function(t,e){var n;return void 0===e&&(e=_()),e._withIDBStore("readonly",(function(e){n=e.get(t)})).then((function(){return n.result}))}(t,w)}function S(t,e){return function(t,e,n){return void 0===n&&(n=_()),n._withIDBStore("readwrite",(function(n){n.put(e,t)}))}(t,e,w).then((function(){return e}))}function P(t){return function(t,e){return void 0===e&&(e=_()),e._withIDBStore("readwrite",(function(e){e.delete(t)}))}(t,w)}function E(t,e){return S("reminder.".concat(t),e)}function C(t){return g(this,void 0,void 0,(function(){return k(this,(function(e){switch(e.label){case 0:return[4,x("reminder.".concat(t))];case 1:return[2,e.sent()]}}))}))}function A(){return g(this,void 0,void 0,(function(){var t;return k(this,(function(e){switch(e.label){case 0:return[4,x("mostRecentOpenedPushPayload")];case 1:return t=e.sent(),[4,P("mostRecentOpenedPushPayload")];case 2:return e.sent(),[2,null!=t?t:void 0]}}))}))}var O,R,T,D,N,I,M,U=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},L=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};!function(t){t.MESSAGE_DELIVERED="k.message.delivered",t.MESSAGE_OPENED="k.message.opened",t.PUSH_REGISTERED="k.push.deviceRegistered",t.PUSH_UNSUBSCRIBED="k.push.deviceUnsubscribed",t.INSTALL_TRACKED="k.stats.installTracked",t.USER_ASSOCIATED="k.stats.userAssociated",t.USER_ASSOCIATION_CLEARED="k.stats.userAssociationCleared"}(O||(O={})),function(t){t.BELL="bell",t.ALERT="alert",t.BANNER="banner",t.DDL_BANNER="ddl_banner"}(R||(R={})),function(t){t.DECLINE="decline",t.REMIND="remind",t.DDL_OPEN_STORE="openStore",t.DDL_OPEN_DEEPLINK="openDeeplink"}(T||(T={})),function(t){t.HOURS="hours",t.DAYS="days"}(D||(D={})),function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.CENTER_LEFT="center-left",t.CENTER="center",t.CENTER_RIGHT="center-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right",t.TOP="top",t.BOTTOM="bottom"}(N||(N={})),function(t){t.PUSH="push",t.DDL="ddl"}(I||(I={})),function(t){t.PUSH="push",t.DDL="ddl",t.EVENTS="events"}(M||(M={}));var F=function(){function t(t){var e,n,r,o;this.apiKey=t.apiKey,this.secretKey=t.secretKey,this.vapidPublicKey=t.vapidPublicKey,this.authHeader="Basic ".concat(btoa("".concat(this.apiKey,":").concat(this.secretKey))),this.serviceWorkerPath=null!==(n=t.serviceWorkerPath)&&void 0!==n?n:"/worker.js",this.autoResubscribe=null===(r=t.autoResubscribe)||void 0===r||r,this.features=null!==(o=t.features)&&void 0!==o?o:[I.PUSH],this.eventSubscribers=[],this.pushStateSubscribers=[],this.urlMap=((e={})[M.PUSH]="https://push-".concat(t.region,".kumulos.com"),e[M.EVENTS]="https://events-".concat(t.region,".kumulos.com"),e[M.DDL]="https://links-".concat(t.region,".kumulos.com"),e)}return t.prototype.subscribeToEvents=function(t){this.eventSubscribers.push(t)},t.prototype.subscribeToSubscriptionStatus=function(t){this.pushStateSubscribers.push(t)},t.prototype.broadcastEvent=function(t){this.eventSubscribers.forEach((function(e){return e(t)}))},t.prototype.broadcastSubscriptionState=function(t){this.pushStateSubscribers.forEach((function(e){return e(t)}))},t.prototype.hasFeature=function(t){return this.features.includes(t)},t.prototype.urlForService=function(t){return this.urlMap[t]},t}();var j,H=void 0;function B(){return H||(H=x("installId").then((function(t){return t||q(u())})))}function q(t){return H=S("installId",t)}function z(){return x("userId").then((function(t){return null!=t?t:B()}))}function W(t,e,n){return U(this,void 0,void 0,(function(){var r;return L(this,(function(o){switch(o.label){case 0:return[4,S("userId",e)];case 1:return o.sent(),r={id:e,attributes:n},[2,K(t,O.USER_ASSOCIATED,r).then((function(t){}))]}}))}))}function K(t,e,n){return U(this,void 0,void 0,(function(){var r,o,i;return L(this,(function(s){switch(s.label){case 0:return[4,B()];case 1:return r=s.sent(),[4,z()];case 2:return o=s.sent(),i={type:e,uuid:u(),timestamp:Date.now(),data:n,userId:o},t.broadcastEvent(i),function(t){return Object.values(O).includes(t)}(e)?[2,f("".concat(t.urlForService(M.EVENTS),"/v1/app-installs/").concat(r,"/events"),t.authHeader,{method:"POST",body:JSON.stringify([i])})]:[2,Promise.resolve()]}}))}))}!function(t){t.KPushReceived="KPushReceived"}(j||(j={}));var G=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},V=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};function Y(t,e){return p("".concat(t.apiKey,":").concat(e))}var Q=function(){function t(t){this.pushRegisterLock=Promise.resolve(),this.safariPushId=t}return t.prototype.requestNotificationPermission=function(t){var e,n="".concat(t.urlForService(M.PUSH),"/safari/").concat(t.apiKey),r=function(){var t={resolve:null,reject:null,promise:null};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}();return null===(e=window.safari)||void 0===e||e.pushNotification.requestPermission(n,this.safariPushId,{},(function(t){r.resolve(t.permission)})),r.promise},t.prototype.pushRegister=function(t){return G(this,void 0,void 0,(function(){var e,n=this;return V(this,(function(r){return e=this.pushRegisterLock.then((function(){return n.pushRegisterSync(t)})),this.pushRegisterLock=e.catch((function(){})),[2,e]}))}))},t.prototype.attemptPushRegister=function(t){return G(this,void 0,void 0,(function(){return V(this,(function(e){switch(e.label){case 0:return[4,x("unregisteredAt")];case 1:return e.sent()?[2]:[2,this.pushRegister(t)]}}))}))},t.prototype.pushUnregister=function(t){return G(this,void 0,void 0,(function(){return V(this,(function(e){switch(e.label){case 0:return[4,this.pushUnsubscribe(t,!1)];case 1:return e.sent(),[4,S("unregisteredAt",Date.now())];case 2:return e.sent(),t.broadcastSubscriptionState("unregistered"),[2]}}))}))},t.prototype.pushUnsubscribe=function(t,e){return void 0===e&&(e=!0),G(this,void 0,void 0,(function(){var n,r;return V(this,(function(o){switch(o.label){case 0:return[4,K(t,O.PUSH_UNSUBSCRIBED)];case 1:return o.sent(),[4,P("pushTokenHash")];case 2:return o.sent(),e?(r=(n=t).broadcastSubscriptionState,[4,this.getCurrentSubscriptionState(t)]):[2];case 3:return r.apply(n,[o.sent()]),[2]}}))}))},t.prototype.pushRegisterSync=function(t){var e;return G(this,void 0,void 0,(function(){var n,r,o;return V(this,(function(i){switch(i.label){case 0:return[4,P("unregisteredAt")];case 1:return i.sent(),(n=null===(e=window.safari)||void 0===e?void 0:e.pushNotification.permission(this.safariPushId))&&n.deviceToken?[4,x("pushTokenHash")]:[2];case 2:return r=i.sent(),o=Y(t,n.deviceToken),r===o?[2]:[4,K(t,O.PUSH_REGISTERED,{type:nt.SAFARI,token:n.deviceToken,bundleId:this.safariPushId})];case 3:return i.sent(),[4,S("pushTokenHash",o)];case 4:return i.sent(),t.broadcastSubscriptionState("subscribed"),[2]}}))}))},t.prototype.requestPermissionAndRegisterForPush=function(t){return G(this,void 0,void 0,(function(){return V(this,(function(e){switch(e.label){case 0:return[4,x("unregisteredAt")];case 1:return e.sent()?[2,"unregistered"]:[4,this.requestNotificationPermission(t)];case 2:switch(e.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this.pushRegister(t)];case 4:return e.sent(),[2,"subscribed"];case 5:return e.sent(),[2,"unsubscribed"];case 6:return[2]}}))}))},t.prototype.getCurrentSubscriptionState=function(t){var e,n;return G(this,void 0,void 0,(function(){var r,o,i;return V(this,(function(s){switch(s.label){case 0:return(r=null===(e=window.safari)||void 0===e?void 0:e.pushNotification.permission(this.safariPushId))&&"denied"!==(null==r?void 0:r.permission)?[4,x("unregisteredAt")]:[2,"blocked"];case 1:return s.sent()?[2,"unregistered"]:[4,x("pushTokenHash")];case 2:return o=s.sent(),i=Y(t,null!==(n=r.deviceToken)&&void 0!==n?n:""),o===i&&"granted"===r.permission?[2,"subscribed"]:[2,"unsubscribed"]}}))}))},t.prototype.handleAutoResubscription=function(t){var e;return G(this,void 0,void 0,(function(){var n,r,o;return V(this,(function(i){switch(i.label){case 0:return t.autoResubscribe&&this.safariPushId&&((n=null===(e=window.safari)||void 0===e?void 0:e.pushNotification.permission(this.safariPushId))&&"granted"===n.permission&&n.deviceToken)?[4,x("pushTokenHash")]:[2];case 1:return r=i.sent(),o=Y(t,n.deviceToken),r===o?[2]:[2,this.attemptPushRegister(t)]}}))}))},t.prototype.isNativePromptShown=function(){return G(this,void 0,void 0,(function(){return V(this,(function(t){return[2,Promise.resolve(!0)]}))}))},t}(),$=Q,J=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},Z=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};function X(t,e){var n,r=e.options.applicationServerKey;return!!r&&(n=new Uint8Array(r),btoa(n.reduce((function(t,e){return t+String.fromCharCode(e)}),"")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""))===t}function tt(t){return J(this,void 0,void 0,(function(){var e,n;return Z(this,(function(r){switch(r.label){case 0:return e=v(t),[4,navigator.serviceWorker.getRegistration(e)];case 1:return(n=r.sent())?[2,n]:[2,Promise.reject("No service worker registration")]}}))}))}function et(t,e){return p("".concat(t.apiKey,":").concat(e.endpoint))}var nt,rt,ot,it=function(){function t(){this.pushRegisterLock=Promise.resolve()}return t.prototype.requestNotificationPermission=function(){return J(this,void 0,void 0,(function(){var t;return Z(this,(function(e){switch(e.label){case 0:if("undefined"==typeof Notification)return[2,Promise.reject("Notifications are not supported in this browser, aborting...")];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Notification.requestPermission()];case 2:return[2,e.sent()];case 3:return t=e.sent(),console.error(t),[2,Promise.reject(t)];case 4:return[2]}}))}))},t.prototype.pushRegister=function(t){return J(this,void 0,void 0,(function(){var e,n=this;return Z(this,(function(r){return e=this.pushRegisterLock.then((function(){return n.pushRegisterSync(t)})),this.pushRegisterLock=e.catch((function(){})),[2,e]}))}))},t.prototype.attemptPushRegister=function(t){return J(this,void 0,void 0,(function(){return Z(this,(function(e){switch(e.label){case 0:return[4,x("unregisteredAt")];case 1:return e.sent()?[2]:[2,this.pushRegister(t)]}}))}))},t.prototype.pushRegisterSync=function(t){return J(this,void 0,void 0,(function(){var e;return Z(this,(function(n){switch(n.label){case 0:return[4,P("unregisteredAt")];case 1:return n.sent(),"PushManager"in window?[4,tt(t.serviceWorkerPath)]:[2,Promise.reject("Push notifications are not supported in this browser")];case 2:return e=n.sent(),[4,this.unsubscribeIfDifferentVapid(e,t.vapidPublicKey)];case 3:return n.sent(),[4,this.subscribeAndMaybeTrackRegisteredEvent(e,t)];case 4:return n.sent(),[2]}}))}))},t.prototype.unsubscribeIfDifferentVapid=function(t,e){return J(this,void 0,void 0,(function(){var n;return Z(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return!(n=r.sent())||X(e,n)?[3,3]:[4,n.unsubscribe()];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.subscribeAndMaybeTrackRegisteredEvent=function(t,e){return J(this,void 0,void 0,(function(){var n,r,o,i;return Z(this,(function(s){switch(s.label){case 0:return[4,t.pushManager.subscribe({applicationServerKey:e.vapidPublicKey,userVisibleOnly:!0})];case 1:return n=s.sent(),r=et(e,n),[4,x("pushEndpointHash")];case 2:return o=s.sent(),[4,x("pushExpiresAt")];case 3:return i=s.sent(),o===r&&(!i||i>Date.now())?[2]:[4,this.trackAndCachePushRegisteredEvent(e,n,r)];case 4:return s.sent(),e.broadcastSubscriptionState("subscribed"),[2]}}))}))},t.prototype.pushUnregister=function(t){return J(this,void 0,void 0,(function(){return Z(this,(function(e){switch(e.label){case 0:return[4,this.pushUnsubscribe(t,!1)];case 1:return e.sent(),[4,S("unregisteredAt",Date.now())];case 2:return e.sent(),t.broadcastSubscriptionState("unregistered"),[2]}}))}))},t.prototype.pushUnsubscribe=function(t,e){return void 0===e&&(e=!0),J(this,void 0,void 0,(function(){var n,r,o;return Z(this,(function(i){switch(i.label){case 0:return"PushManager"in window?[4,tt(t.serviceWorkerPath)]:[2,Promise.reject("Push notifications are not supported in this browser")];case 1:return[4,i.sent().pushManager.getSubscription()];case 2:return(n=i.sent())?[4,n.unsubscribe()]:[3,4];case 3:i.sent(),i.label=4;case 4:return[4,K(t,O.PUSH_UNSUBSCRIBED)];case 5:return i.sent(),[4,P("pushEndpointHash")];case 6:return i.sent(),[4,P("pushExpiresAt")];case 7:return i.sent(),e?(o=(r=t).broadcastSubscriptionState,[4,this.getCurrentSubscriptionState(t)]):[2];case 8:return o.apply(r,[i.sent()]),[2]}}))}))},t.prototype.trackAndCachePushRegisteredEvent=function(t,e,n){return J(this,void 0,void 0,(function(){return Z(this,(function(r){switch(r.label){case 0:return[4,K(t,O.PUSH_REGISTERED,{type:nt.W3C,token:e})];case 1:return r.sent(),[4,S("pushEndpointHash",n)];case 2:return r.sent(),[4,S("pushExpiresAt",e.expirationTime)];case 3:return r.sent(),[2]}}))}))},t.prototype.requestPermissionAndRegisterForPush=function(t){return J(this,void 0,void 0,(function(){return Z(this,(function(e){switch(e.label){case 0:return[4,x("unregisteredAt")];case 1:return e.sent()?[2,"unregistered"]:[4,this.requestNotificationPermission()];case 2:switch(e.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this.pushRegister(t)];case 4:return e.sent(),[2,"subscribed"];case 5:return e.sent(),[2,"unsubscribed"];case 6:return[2]}}))}))},t.prototype.getCurrentSubscriptionState=function(t){return J(this,void 0,void 0,(function(){var e,n,r;return Z(this,(function(o){switch(o.label){case 0:return"denied"===(e=Notification.permission)?[2,"blocked"]:[4,x("unregisteredAt")];case 1:return o.sent()?[2,"unregistered"]:[4,tt(t.serviceWorkerPath)];case 2:return[4,null==(n=o.sent())?void 0:n.pushManager.getSubscription()];case 3:return(r=o.sent())&&"granted"===e&&X(t.vapidPublicKey,r)?[2,"subscribed"]:[2,"unsubscribed"]}}))}))},t.prototype.handleAutoResubscription=function(t){return J(this,void 0,void 0,(function(){var e,n,r,o,i;return Z(this,(function(s){switch(s.label){case 0:return t.autoResubscribe?"granted"!==(e=Notification.permission)?("Auto-resubscribe: permission not granted, aborting: ".concat(e),[2]):[4,x("pushEndpointHash")]:[2];case 1:return n=s.sent(),[4,x("pushExpiresAt")];case 2:return r=s.sent(),[4,tt(t.serviceWorkerPath)];case 3:return[4,s.sent().pushManager.getSubscription()];case 4:if(o=s.sent(),i=void 0,o&&(i=et(t,o)),void 0!==n&&n===i&&o&&X(t.vapidPublicKey,o)&&(null==r||r>Date.now()))return[2];try{return[2,this.attemptPushRegister(t)]}catch(t){console.error(t)}return[2]}}))}))},t.prototype.isNativePromptShown=function(){return"chrome"!==a()?Promise.resolve(!0):new Promise((function(t){var e=!1,n=function(){e||(clearTimeout(r),window.removeEventListener("blur",n),e=!0,t(!0))};window.addEventListener("blur",n);var r=setTimeout((function(){window.removeEventListener("blur",n),t(!1)}),1e3)}))},t}(),st=it,ut=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},at=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},ct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};function lt(t){if("safari"===a()){var e=function(t,e){void 0===t&&(t=location.search),void 0===e&&(e=[]);var n=void 0;return t.length>0&&(n=t.substring(1).split("&").map((function(t){return t.split("=")})).map((function(t){return t.map(decodeURIComponent)})).filter((function(t){return-1===e.indexOf(t[0])})).reduce((function(t,e){var n;return r(r({},t),((n={})[e[0]]=e[1],n))}),{})),n}();(null==e?void 0:e.knid)&&K(t,O.MESSAGE_OPENED,{type:rt.PUSH,id:Number(e.knid)})}}function pt(t){var e,n,r,o=t.data,i=(o["k.message"],ct(o,["k.message"]));return{id:t.data["k.message"].data.id,title:t.title,message:t.msg,data:i,url:null!==(e=t.url)&&void 0!==e?e:void 0,iconUrl:null!==(n=t.icon)&&void 0!==n?n:void 0,imageUrl:null!==(r=t.image)&&void 0!==r?r:void 0}}!function(t){t[t.W3C=3]="W3C",t[t.SAFARI=4]="SAFARI"}(nt||(nt={})),function(t){t[t.PUSH=1]="PUSH"}(rt||(rt={}));var ft,ht=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},dt=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},vt=function(t){return{CONFIG_CACHE_KEY:"".concat(t,"Config"),CONFIG_CACHE_KEY_UPDATED:"".concat(t,"ConfigUpdated")}};function mt(t,e,n){var r;return ht(this,void 0,void 0,(function(){var o,i,s,u,a;return dt(this,(function(c){switch(c.label){case 0:return[4,x((o=vt(e)).CONFIG_CACHE_KEY)];case 1:return i=c.sent(),[4,x(o.CONFIG_CACHE_KEY_UPDATED)];case 2:if(s=null!==(r=c.sent())&&void 0!==r?r:0,u=!1,!(Date.now()-s>36e5))return[3,6];c.label=3;case 3:return c.trys.push([3,5,,6]),[4,d(t,n)];case 4:return i=c.sent(),u=!0,[3,6];case 5:return a=c.sent(),console.warn(a),[3,6];case 6:return u?[4,S(o.CONFIG_CACHE_KEY,i)]:[3,9];case 7:return c.sent(),[4,S(o.CONFIG_CACHE_KEY_UPDATED,Date.now())];case 8:c.sent(),c.label=9;case 9:return[2,i]}}))}))}function yt(t){return ht(this,void 0,void 0,(function(){var e,n;return dt(this,(function(r){switch(r.label){case 0:return[4,B()];case 1:e=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,mt("".concat(t.urlForService(M.DDL),"/v1/banners?webInstallId=").concat(e),ft.DDL,t.authHeader)];case 3:return[2,r.sent()];case 4:return n=r.sent(),console.warn("loadDdlConfig: failed to load Deferred DeepLink configuration",n),[3,5];case 5:return[2]}}))}))}function bt(t){return ht(this,void 0,void 0,(function(){var e,n;return dt(this,(function(r){switch(r.label){case 0:return[4,x((e=vt(ft.DDL)).CONFIG_CACHE_KEY)];case 1:return(n=r.sent())?(n=n.filter((function(e){return e.uuid!==t})),[4,S(e.CONFIG_CACHE_KEY,n)]):[2];case 2:return r.sent(),[2]}}))}))}!function(t){t.PLATFORM="platformV2",t.DDL="ddl"}(ft||(ft={}));var _t,gt,kt,wt,xt,St,Pt,Et,Ct,At,Ot,Rt={},Tt=[],Dt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nt=Array.isArray;function It(t,e){for(var n in e)t[n]=e[n];return t}function Mt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ut(t,e,n){var r,o,i,s={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?_t.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===s[i]&&(s[i]=t.defaultProps[i]);return Lt(t,s,r,o,null)}function Lt(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++kt:o,__i:-1,__u:0};return null==o&&null!=gt.vnode&&gt.vnode(i),i}function Ft(t){return t.children}function jt(t,e){this.props=t,this.context=e}function Ht(t,e){if(null==e)return t.__?Ht(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?Ht(t):null}function Bt(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return Bt(t)}}function qt(t){(!t.__d&&(t.__d=!0)&&wt.push(t)&&!zt.__r++||xt!==gt.debounceRendering)&&((xt=gt.debounceRendering)||St)(zt)}function zt(){var t,e,n,r,o,i,s,u;for(wt.sort(Pt);t=wt.shift();)t.__d&&(e=wt.length,r=void 0,i=(o=(n=t).__v).__e,s=[],u=[],n.__P&&((r=It({},o)).__v=o.__v+1,gt.vnode&&gt.vnode(r),Zt(n.__P,r,o,n.__n,n.__P.namespaceURI,32&o.__u?[i]:null,s,null==i?Ht(o):i,!!(32&o.__u),u),r.__v=o.__v,r.__.__k[r.__i]=r,Xt(s,r,u),r.__e!=i&&Bt(r)),wt.length>e&&wt.sort(Pt));zt.__r=0}function Wt(t,e,n,r,o,i,s,u,a,c,l){var p,f,h,d,v,m,y=r&&r.__k||Tt,b=e.length;for(a=Kt(n,e,y,a),p=0;p<b;p++)null!=(h=n.__k[p])&&(f=-1===h.__i?Rt:y[h.__i]||Rt,h.__i=p,m=Zt(t,h,f,o,i,s,u,a,c,l),d=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&ee(f.ref,null,h),l.push(h.ref,h.__c||d,h)),null==v&&null!=d&&(v=d),4&h.__u||f.__k===h.__k?a=Gt(h,a,t):"function"==typeof h.type&&void 0!==m?a=m:d&&(a=d.nextSibling),h.__u&=-7);return n.__e=v,a}function Kt(t,e,n,r){var o,i,s,u,a,c=e.length,l=n.length,p=l,f=0;for(t.__k=[],o=0;o<c;o++)null!=(i=e[o])&&"boolean"!=typeof i&&"function"!=typeof i?(u=o+f,(i=t.__k[o]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?Lt(null,i,null,null,null):Nt(i)?Lt(Ft,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?Lt(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,s=null,-1!==(a=i.__i=Yt(i,n,u,p))&&(p--,(s=n[a])&&(s.__u|=2)),null==s||null===s.__v?(-1==a&&f--,"function"!=typeof i.type&&(i.__u|=4)):a!==u&&(a==u-1?f--:a==u+1?f++:(a>u?f--:f++,i.__u|=4))):i=t.__k[o]=null;if(p)for(o=0;o<l;o++)null!=(s=n[o])&&!(2&s.__u)&&(s.__e==r&&(r=Ht(s)),ne(s,s));return r}function Gt(t,e,n){var r,o;if("function"==typeof t.type){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=Gt(r[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Ht(t)),n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8===e.nodeType);return e}function Vt(t,e){return e=e||[],null==t||"boolean"==typeof t||(Nt(t)?t.some((function(t){Vt(t,e)})):e.push(t)),e}function Yt(t,e,n,r){var o=t.key,i=t.type,s=n-1,u=n+1,a=e[n];if(null===a||a&&o==a.key&&i===a.type&&!(2&a.__u))return n;if(("function"!=typeof i||i===Ft||o)&&r>(null==a||2&a.__u?0:1))for(;s>=0||u<e.length;){if(s>=0){if((a=e[s])&&!(2&a.__u)&&o==a.key&&i===a.type)return s;s--}if(u<e.length){if((a=e[u])&&!(2&a.__u)&&o==a.key&&i===a.type)return u;u++}}return-1}function Qt(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||Dt.test(e)?n:n+"px"}function $t(t,e,n,r,o){var i;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Qt(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Qt(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(Et,"$1")),e=e.toLowerCase()in t||"onFocusOut"===e||"onFocusIn"===e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=Ct,t.addEventListener(e,i?Ot:At,i)):t.removeEventListener(e,i?Ot:At,i);else{if("http://www.w3.org/2000/svg"==o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function Jt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=Ct++;else if(e.t<n.u)return;return n(gt.event?gt.event(e):e)}}}function Zt(t,e,n,r,o,i,s,u,a,c){var l,p,f,h,d,v,m,y,b,_,g,k,w,x,S,P,E,C=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(a=!!(32&n.__u),i=[u=e.__e=n.__e]),(l=gt.__b)&&l(e);t:if("function"==typeof C)try{if(y=e.props,b="prototype"in C&&C.prototype.render,_=(l=C.contextType)&&r[l.__c],g=l?_?_.props.value:l.__:r,n.__c?m=(p=e.__c=n.__c).__=p.__E:(b?e.__c=p=new C(y,g):(e.__c=p=new jt(y,g),p.constructor=C,p.render=re),_&&_.sub(p),p.props=y,p.state||(p.state={}),p.context=g,p.__n=r,f=p.__d=!0,p.__h=[],p._sb=[]),b&&null==p.__s&&(p.__s=p.state),b&&null!=C.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=It({},p.__s)),It(p.__s,C.getDerivedStateFromProps(y,p.__s))),h=p.props,d=p.state,p.__v=e,f)b&&null==C.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),b&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(b&&null==C.getDerivedStateFromProps&&y!==h&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(y,g),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(y,p.__s,g)||e.__v===n.__v)){for(e.__v!==n.__v&&(p.props=y,p.state=p.__s,p.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some((function(t){t&&(t.__=e)})),k=0;k<p._sb.length;k++)p.__h.push(p._sb[k]);p._sb=[],p.__h.length&&s.push(p);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(y,p.__s,g),b&&null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(h,d,v)}))}if(p.context=g,p.props=y,p.__P=t,p.__e=!1,w=gt.__r,x=0,b){for(p.state=p.__s,p.__d=!1,w&&w(e),l=p.render(p.props,p.state,p.context),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[]}else do{p.__d=!1,w&&w(e),l=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++x<25);p.state=p.__s,null!=p.getChildContext&&(r=It(It({},r),p.getChildContext())),b&&!f&&null!=p.getSnapshotBeforeUpdate&&(v=p.getSnapshotBeforeUpdate(h,d)),u=Wt(t,Nt(P=null!=l&&l.type===Ft&&null==l.key?l.props.children:l)?P:[P],e,n,r,o,i,s,u,a,c),p.base=e.__e,e.__u&=-161,p.__h.length&&s.push(p),m&&(p.__E=p.__=null)}catch(t){if(e.__v=null,a||null!=i)if(t.then){for(e.__u|=a?160:128;u&&8===u.nodeType&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,e.__e=u}else for(E=i.length;E--;)Mt(i[E]);else e.__e=n.__e,e.__k=n.__k;gt.__e(t,e,n)}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):u=e.__e=te(n.__e,e,n,r,o,i,s,a,c);return(l=gt.diffed)&&l(e),128&e.__u?void 0:u}function Xt(t,e,n){for(var r=0;r<n.length;r++)ee(n[r],n[++r],n[++r]);gt.__c&&gt.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){gt.__e(t,e.__v)}}))}function te(t,e,n,r,o,i,s,u,a){var c,l,p,f,h,d,v,m=n.props,y=e.props,b=e.type;if("svg"===b?o="http://www.w3.org/2000/svg":"math"===b?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=i)for(c=0;c<i.length;c++)if((h=i[c])&&"setAttribute"in h==!!b&&(b?h.localName===b:3===h.nodeType)){t=h,i[c]=null;break}if(null==t){if(null===b)return document.createTextNode(y);t=document.createElementNS(o,b,y.is&&y),u&&(gt.__m&&gt.__m(e,i),u=!1),i=null}if(null===b)m===y||u&&t.data===y||(t.data=y);else{if(i=i&&_t.call(t.childNodes),m=n.props||Rt,!u&&null!=i)for(m={},c=0;c<t.attributes.length;c++)m[(h=t.attributes[c]).name]=h.value;for(c in m)if(h=m[c],"children"==c);else if("dangerouslySetInnerHTML"==c)p=h;else if(!(c in y)){if("value"==c&&"defaultValue"in y||"checked"==c&&"defaultChecked"in y)continue;$t(t,c,null,h,o)}for(c in y)h=y[c],"children"==c?f=h:"dangerouslySetInnerHTML"==c?l=h:"value"==c?d=h:"checked"==c?v=h:u&&"function"!=typeof h||m[c]===h||$t(t,c,h,m[c],o);if(l)u||p&&(l.__html===p.__html||l.__html===t.innerHTML)||(t.innerHTML=l.__html),e.__k=[];else if(p&&(t.innerHTML=""),Wt(t,Nt(f)?f:[f],e,n,r,"foreignObject"===b?"http://www.w3.org/1999/xhtml":o,i,s,i?i[0]:n.__k&&Ht(n,0),u,a),null!=i)for(c=i.length;c--;)Mt(i[c]);u||(c="value","progress"===b&&null==d?t.removeAttribute("value"):void 0!==d&&(d!==t[c]||"progress"===b&&!d||"option"===b&&d!==m[c])&&$t(t,c,d,m[c],o),c="checked",void 0!==v&&v!==t[c]&&$t(t,c,v,m[c],o))}return t}function ee(t,e,n){try{if("function"==typeof t){var r="function"==typeof t.__u;r&&t.__u(),r&&null==e||(t.__u=t(e))}else t.current=e}catch(t){gt.__e(t,n)}}function ne(t,e,n){var r,o;if(gt.unmount&&gt.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ee(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){gt.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&ne(r[o],e,n||"function"!=typeof t.type);n||Mt(t.__e),t.__c=t.__=t.__e=void 0}function re(t,e,n){return this.constructor(t,n)}function oe(t,e,n){var r,o,i,s;e===document&&(e=document.documentElement),gt.__&&gt.__(t,e),o=(r="function"==typeof n)?null:n&&n.__k||e.__k,i=[],s=[],Zt(e,t=(!r&&n||e).__k=Ut(Ft,null,[t]),o||Rt,Rt,e.namespaceURI,!r&&n?[n]:o?null:e.firstChild?_t.call(e.childNodes):null,i,!r&&n?n:o?o.__e:e.firstChild,r,s),Xt(i,t,s)}_t=Tt.slice,gt={__e:function(t,e,n,r){for(var o,i,s;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,r||{}),s=o.__d),s)return o.__E=o}catch(e){t=e}throw t}},kt=0,jt.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=It({},this.state),"function"==typeof t&&(t=t(It({},n),this.props)),t&&It(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),qt(this))},jt.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),qt(this))},jt.prototype.render=Ft,wt=[],St="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Pt=function(t,e){return t.__v.__b-e.__v.__b},zt.__r=0,Et=/(PointerCapture)$|Capture$/i,Ct=0,At=Jt(!1),Ot=Jt(!0);var ie,se=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},ue=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},ae=((ie={})[D.HOURS]=36e5,ie[D.DAYS]=864e5,ie);function ce(t){var e=t.uiActions;if(e){var n=e.decline.type;switch(n){case T.REMIND:return E(t.uuid,{declinedOn:Date.now()});case T.DECLINE:return E(t.uuid,"suppressed");default:return console.warn("Unsupported decline action type ".concat(n," supported for prompt ").concat(t.uuid,", fall back to always show this prompt when declined"))}}}function le(t){return se(this,void 0,void 0,(function(){var e,n;return ue(this,(function(r){switch(r.label){case 0:return[4,C(t.uuid)];case 1:return(e=r.sent())?"suppressed"===e?[2,!0]:"uiActions"in t?(n=t.uiActions).decline.type!==T.REMIND?[2,!1]:[2,(o=e.declinedOn,i=n.decline.delay,!(Date.now()-o>ae[i.timeUnit]*i.duration))]:[2,!1]:[2,!1]}var o,i}))}))}var pe=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},fe=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};function he(t,e){if(!Array.isArray(t))return!1;if("string"==typeof e){var n=t.map((function(t){var e,n="^".concat((e=t,e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).replace(/\\\*/g,".*"),"$");return new RegExp(n,"g")}));return n.reduce((function(t,n){return t||n.test(String(e))}),!1)}return"number"==typeof e&&t.indexOf(e)>-1}function de(t,e){return t==e}function ve(t,e){return e>t}function me(t,e){return e>=t}function ye(t,e){return e<t}function be(t,e){return e<=t}var _e=function(){function t(t,e){var n=this;this.eventQueue=[],this.handleSdkEvent=function(t){var e;n.eventQueue.push(t),null===(e=n.eventReceivedCallback)||void 0===e||e.call(n,t)},this.eventReceivedCallback=e,t.subscribeToEvents(this.handleSdkEvent)}return t.prototype.filterPrompts=function(t,e){return void 0===e&&(e=function(t){return!0}),pe(this,void 0,void 0,(function(){var n,r,o,i,s,u,a,c;return fe(this,(function(l){switch(l.label){case 0:for(i in n=[],o=[],r=t)o.push(i);s=0,l.label=1;case 1:if(!(s<o.length))return[3,6];if(!((i=o[s])in r))return[3,5];u=t[i],a=0,l.label=2;case 2:return a<this.eventQueue.length?(c=this.eventQueue[a],[4,le(u)]):[3,5];case 3:!l.sent()&&function(t,e){var n,r=t.trigger;if(r.event!==e.type)return!1;if(!(null===(n=r.filters)||void 0===n?void 0:n.length))return!0;if(!e.data)return!1;for(var o=!0,i=0;i<r.filters.length;++i){var s=r.filters[i],u=s[0],a=s[1],c=s[2],l=e.data[u],p=!1;switch(a){case"in":case"IN":p=he(c,l);break;case"=":p=de(c,l);break;case">":p=ve(c,l);break;case">=":p=me(c,l);break;case"<":p=ye(c,l);break;case"<=":p=be(c,l);break;default:console.warn("Unknown filter operator: ".concat(a))}o=o&&p}return o}(u,c)&&e(u)&&n.push(u),l.label=4;case 4:return++a,[3,2];case 5:return s++,[3,1];case 6:return this.eventQueue=[],[2,n]}}))}))},t}(),ge=n(72),ke=n.n(ge),we=n(825),xe=n.n(we),Se=n(659),Pe=n.n(Se),Ee=n(56),Ce=n.n(Ee),Ae=n(540),Oe=n.n(Ae),Re=n(113),Te=n.n(Re),De=n(77),Ne={};Ne.styleTagTransform=Te(),Ne.setAttributes=Ce(),Ne.insert=Pe().bind(null,"head"),Ne.domAPI=xe(),Ne.insertStyleElement=Oe();ke()(De.A,Ne),De.A&&De.A.locals&&De.A.locals;function Ie(t){var e=t.stars;t.ratingCount;return Ut("div",{class:"kumulos-rating",style:{color:t.color}},function(){for(var t=[],n=1;n<=5;n++)t.push(Ut(Me,{state:e>=n?"on":e<n&&e>n-1?"half":"off"}));return t}(),Ut("span",{class:"kumulos-rating-count"},"(",t.ratingCount,")"))}function Me(t){var e;return e="on"===t.state?Ut("span",null,""):"half"===t.state?Ut("div",null,Ut("span",null,""),Ut("span",{class:"kumulos-rating-halfstar"},"")):Ut("span",null,""),Ut("div",{class:"kumulos-rating-star"},e)}var Ue,Le,Fe,je=n(673),He=n.n(je),Be=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleAction=function(){var t=e.props.promptActions.uiActions.accept;switch(t.type){case T.DDL_OPEN_STORE:He()(t.deepLinkUrl).then((function(){return e.props.onAction(T.DDL_OPEN_STORE)})).catch((function(t){console.error("Unable to capture deeplink url for deferred app pickup",t)}));break;case T.DDL_OPEN_DEEPLINK:e.props.onAction(T.DDL_OPEN_STORE);break;default:return console.error("Handle DeepLink Action: unsupported accept action type '".concat(t.type,"'"))}},e}return Be(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.class,r=t.text;return Ut("button",{type:"button",style:e,class:n,onTouchEnd:this.handleAction},r)},e}(jt),ze=qe,We=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(){return Ke=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ke.apply(this,arguments)},Ge=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Ve={backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},Ye=["kumulos-prompt","kumulos-banner-container","kumulos-banner-compact","kumulos-safe-area-inset-pad-left","kumulos-safe-area-inset-pad-right"],Qe=function(t){function e(e){var n=t.call(this,e)||this;return n.onConfirm=function(t){!0!==n.state.showCopyToast&&(t!==T.DDL_OPEN_DEEPLINK?t===T.DDL_OPEN_STORE&&(n.setState({showCopyToast:!0}),setTimeout((function(){n.setState({showCopyToast:!1}),n.props.onConfirm(n.props.config)}),1e3)):n.props.onConfirm(n.props.config))},n.onCancel=function(){n.props.onCancel(n.props.config)},n.containerRef={current:null},n.state={showCopyToast:!1},n}return We(e,t),e.prototype.componentDidMount=function(){if(this.containerRef.current){var t=this.containerRef.current,e=t.clientWidth,n=t.clientHeight;this.props.dimensions(e,n)}},e.prototype.getCssClasses=function(t){var e=Ge(Ge([],Ye,!0),["kumulos-prompt-position-".concat(t)],!1);return[N.TOP,N.BOTTOM].includes(t)&&e.push("kumulos-safe-area-inset-pad-".concat(t)),e.join(" ")},e.prototype.render=function(){var t=this.props.config,e=t.position,n=t.labels,r=t.colors,o=t.imageUrl,i=t.appRating,s=n.heading,u=n.body,a=n.acceptAction,c=r.bg,l=r.fg,p=r.acceptActionBg,f=r.acceptActionFg,h=r.declineActionBg,d=r.declineActionFg,v=r.ratingFg,m=this.getCssClasses(e),y={backgroundColor:c,color:l},b={backgroundColor:h,color:d},_={backgroundColor:p,color:f},g=Ke(Ke({},Ve),{backgroundImage:"url(".concat(o,")")});return Ut("div",{style:y,class:m,ref:this.containerRef},Ut("div",{class:"kumulos-banner-close",style:b,onTouchEnd:this.onCancel},""),Ut("div",{style:g,class:"kumulos-banner-icon"}),Ut("div",{class:"kumulos-banner-content"},Ut("div",{class:"kumulos-banner-header"},Ut("h1",null,s)),Ut("div",{class:"kumulos-banner-body"},u),i&&Ut(Ie,{ratingCount:i.ratingCount,stars:i.rating,color:v})),Ut("div",{class:"kumulos-banner-actions"},Ut(ze,{style:_,class:"kumulos-action-button kumulos-action-button-confirm",text:a,promptActions:t,onAction:this.onConfirm})),this.state.showCopyToast&&Ut("div",{class:"kumulos-toast"},"Link Copied"))},e}(jt),$e=[],Je=gt,Ze=Je.__b,Xe=Je.__r,tn=Je.diffed,en=Je.__c,nn=Je.unmount,rn=Je.__;function on(){for(var t;t=$e.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(an),t.__H.__h.forEach(cn),t.__H.__h=[]}catch(e){t.__H.__h=[],Je.__e(e,t.__v)}}Je.__b=function(t){Ue=null,Ze&&Ze(t)},Je.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),rn&&rn(t,e)},Je.__r=function(t){Xe&&Xe(t);var e=(Ue=t.__c).__H;e&&(Le===Ue?(e.__h=[],Ue.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0}))):(e.__h.forEach(an),e.__h.forEach(cn),e.__h=[],0)),Le=Ue},Je.diffed=function(t){tn&&tn(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==$e.push(e)&&Fe===Je.requestAnimationFrame||((Fe=Je.requestAnimationFrame)||un)(on)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.i=void 0}))),Le=Ue=null},Je.__c=function(t,e){e.some((function(t){try{t.__h.forEach(an),t.__h=t.__h.filter((function(t){return!t.__||cn(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],Je.__e(n,t.__v)}})),en&&en(t,e)},Je.unmount=function(t){nn&&nn(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{an(t)}catch(t){e=t}})),n.__H=void 0,e&&Je.__e(e,n.__v))};var sn="function"==typeof requestAnimationFrame;function un(t){var e,n=function(){clearTimeout(r),sn&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);sn&&(e=requestAnimationFrame(n))}function an(t){var e=Ue,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),Ue=e}function cn(t){var e=Ue;t.__c=t.__(),Ue=e}function ln(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function pn(t,e){this.props=t,this.context=e}(pn.prototype=new jt).isPureReactComponent=!0,pn.prototype.shouldComponentUpdate=function(t,e){return ln(this.props,t)||ln(this.state,e)};var fn=gt.__b;gt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),fn&&fn(t)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var hn=gt.__e;gt.__e=function(t,e,n,r){if(t.then)for(var o,i=e;i=i.__;)if((o=i.__c)&&o.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e);hn(t,e,n,r)};var dn=gt.unmount;function vn(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),t.__c.__H=null),null!=(t=function(t,e){for(var n in e)t[n]=e[n];return t}({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return vn(t,e,n)}))),t}function mn(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return mn(t,e,n)})),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function yn(){this.__u=0,this.o=null,this.__b=null}function bn(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function _n(){this.i=null,this.l=null}gt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),dn&&dn(t)},(yn.prototype=new jt).__c=function(t,e){var n=e.__c,r=this;null==r.o&&(r.o=[]),r.o.push(n);var o=bn(r.__v),i=!1,s=function(){i||(i=!0,n.__R=null,o?o(u):u())};n.__R=s;var u=function(){if(! --r.__u){if(r.state.__a){var t=r.state.__a;r.__v.__k[0]=mn(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__a:r.__b=null});e=r.o.pop();)e.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(s,s)},yn.prototype.componentWillUnmount=function(){this.o=[]},yn.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=vn(this.__b,n,r.__O=r.__P)}this.__b=null}var o=e.__a&&Ut(Ft,null,t.fallback);return o&&(o.__u&=-33),[Ut(Ft,null,e.__a?null:t.children),o]};var gn=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function kn(t){return this.getChildContext=function(){return t.context},t.children}function wn(t){var e=this,n=t.h;e.componentWillUnmount=function(){oe(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),e.v||(e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(t){this.childNodes.push(t),e.h.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.h.insertBefore(t,n)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.h.removeChild(t)}}),oe(Ut(kn,{context:e.context},t.__v),e.v)}function xn(t,e){var n=Ut(wn,{__v:t,h:e});return n.containerInfo=e,n}(_n.prototype=new jt).__a=function(t){var e=this,n=bn(e.__v),r=e.l.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),gn(e,t,r)):o()};n?n(i):i()}},_n.prototype.render=function(t){this.i=null,this.l=new Map;var e=Vt(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},_n.prototype.componentDidUpdate=_n.prototype.componentDidMount=function(){var t=this;this.l.forEach((function(e,n){gn(t,n,e)}))};var Sn="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Pn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,En=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Cn=/[A-Z0-9]/g,An="undefined"!=typeof document,On=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(t)};jt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(jt.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var Rn=gt.event;function Tn(){}function Dn(){return this.cancelBubble}function Nn(){return this.defaultPrevented}gt.event=function(t){return Rn&&(t=Rn(t)),t.persist=Tn,t.isPropagationStopped=Dn,t.isDefaultPrevented=Nn,t.nativeEvent=t};var In={enumerable:!1,configurable:!0,get:function(){return this.class}},Mn=gt.vnode;gt.vnode=function(t){"string"==typeof t.type&&function(t){var e=t.props,n=t.type,r={},o=-1===n.indexOf("-");for(var i in e){var s=e[i];if(!("value"===i&&"defaultValue"in e&&null==s||An&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var u=i.toLowerCase();"defaultValue"===i&&"value"in e&&null==e.value?i="value":"download"===i&&!0===s?s="":"translate"===u&&"no"===s?s=!1:"o"===u[0]&&"n"===u[1]?"ondoubleclick"===u?i="ondblclick":"onchange"!==u||"input"!==n&&"textarea"!==n||On(e.type)?"onfocus"===u?i="onfocusin":"onblur"===u?i="onfocusout":En.test(i)&&(i=u):u=i="oninput":o&&Pn.test(i)?i=i.replace(Cn,"-$&").toLowerCase():null===s&&(s=void 0),"oninput"===u&&r[i=u]&&(i="oninputCapture"),r[i]=s}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=Vt(e.children).forEach((function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=Vt(e.children).forEach((function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value}))),e.class&&!e.className?(r.class=e.class,Object.defineProperty(r,"className",In)):(e.className&&!e.class||e.class&&e.className)&&(r.class=r.className=e.className),t.props=r}(t),t.$$typeof=Sn,Mn&&Mn(t)};var Un=gt.__r;gt.__r=function(t){Un&&Un(t),t.__c};var Ln=gt.diffed;gt.diffed=function(t){Ln&&Ln(t);var e=t.props,n=t.__e;null!=n&&"textarea"===t.type&&"value"in e&&e.value!==n.value&&(n.value=null==e.value?"":e.value)};var Fn,jn;!function(t){t.REQUEST_FINGERPRINT="REQUEST_FINGERPRINT"}(Fn||(Fn={})),function(t){t.READY="READY",t.FINGERPRINT_GENERATED="FINGERPRINT_GENERATED"}(jn||(jn={}));var Hn,Bn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qn="https://pd.app.delivery";!function(t){t[t.IDLE=0]="IDLE",t[t.CAPTURING=1]="CAPTURING"}(Hn||(Hn={}));var zn=function(t){function e(e){var n=t.call(this,e)||this;return n.onMessage=function(t){"FpCapure: message ".concat(t.data.type," received from ").concat(t.origin);var e=t.data;if(t.origin===qn)switch(e.type){case jn.READY:n.setState({isReady:!0});break;case jn.FINGERPRINT_GENERATED:n.setState({captureState:Hn.IDLE},(function(){n.props.onCaptured(e.data.components)}))}},n.dispatchMessage=function(t){var e;"FpCapure: dispatching ".concat(t.type," message to capture frame");var r=null===(e=n.iFrameRef.current)||void 0===e?void 0:e.contentWindow;r&&r.postMessage(t,qn)},n.iFrameRef={current:null},n.state={isReady:!1,captureState:Hn.IDLE},n}return Bn(e,t),e.prototype.componentDidMount=function(){window.addEventListener("message",this.onMessage)},e.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.onMessage)},e.prototype.componentWillUpdate=function(t,e){var n=e.isReady,r=e.captureState,o=this.state.captureState;n&&r===Hn.CAPTURING&&o===Hn.IDLE&&this.dispatchMessage({type:Fn.REQUEST_FINGERPRINT})},e.prototype.requestFp=function(){this.state.captureState===Hn.IDLE?this.setState({captureState:Hn.CAPTURING}):console.error("FpCapture.requestFp: captureState not IDLE")},e.prototype.render=function(){return xn(Ut("iframe",{ref:this.iFrameRef,src:qn,style:{width:0,height:0}}),document.body)},e}(jt),Wn=zn,Kn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gn=function(t){function e(e){var n=t.call(this,e)||this;return n.onDimensions=function(t,e){var r=n.props.config,o=window.getComputedStyle(document.body,null);n.siteMargin=parseFloat(o.getPropertyValue((null==r?void 0:r.position)===N.TOP?"margin-top":"margin-bottom")),n.siteTransition=o.getPropertyValue("transition"),(null==r?void 0:r.position)===N.BOTTOM&&(e+=20);var i=e+n.siteMargin;document.body.style.transition="all 0.375s ease 0s",document.body.style[(null==r?void 0:r.position)===N.TOP?"marginTop":"marginBottom"]="".concat(i,"px")},n.onBannerConfirm=function(t){var e;switch(t.uiActions.accept.type){case T.DDL_OPEN_STORE:null===(e=n.fpRef.current)||void 0===e||e.requestFp();break;case T.DDL_OPEN_DEEPLINK:n.resetBodyStyles(),n.props.onBannerConfirm(n.props.config);break;default:console.error("Ui.onBannerConfirm: Unsupported accept action type, unable to confirm banner")}},n.onBannerCancelled=function(t){n.resetBodyStyles(),n.props.onBannerCancelled(t)},n.onCaptureFp=function(t){n.resetBodyStyles(),n.props.onBannerConfirm(n.props.config,t)},n.state={requestFpCapture:!1},n.fpRef={current:null},n}return Kn(e,t),e.prototype.resetBodyStyles=function(){var t,e=this.props.config;document.body.style.transition=null!==(t=this.siteTransition)&&void 0!==t?t:"",document.body.style[(null==e?void 0:e.position)===N.TOP?"marginTop":"marginBottom"]=this.siteMargin?"".concat(this.siteMargin,"px"):""},e.prototype.componentWillUnmount=function(){this.resetBodyStyles()},e.prototype.render=function(){return this.props.config?xn(Ut(Ft,null,Ut(Qe,{config:this.props.config,onConfirm:this.onBannerConfirm,onCancel:this.onBannerCancelled,dimensions:this.onDimensions}),Ut(Wn,{ref:this.fpRef,onCaptured:this.onCaptureFp})),document.body):null},e}(jt),Vn=Gn;function Yn(t,e){return!(void 0===t.trigger.afterSeconds||t.trigger.afterSeconds<0)&&(t.trigger.afterSeconds,setTimeout(e,1e3*t.trigger.afterSeconds,t),!0)}var Qn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},$n=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};function Jn(t,e,n){return Qn(this,void 0,void 0,(function(){var r,o;return $n(this,(function(i){switch(i.label){case 0:return r="".concat(t.urlForService(M.DDL),"/v1/banners/").concat(e,"/taps"),[4,B()];case 1:return o=i.sent(),[2,f(r,t.authHeader,{method:"POST",body:JSON.stringify({webInstallId:o,fingerprint:n})})]}}))}))}var Zn,Xn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},tr=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};!function(t){t.LOADING="loading",t.READY="ready"}(Zn||(Zn={}));var er=function(){function t(t,e){var n=this;this.activeConfigs=[],this.onBannerConfirm=function(t,e){return Xn(n,void 0,void 0,(function(){return tr(this,(function(n){switch(n.label){case 0:return e?[4,Jn(this.context,t.uuid,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,bt(t.uuid)];case 3:return n.sent(),this.hidePrompt(t),this.performClientRedirection(t),[2]}}))}))},this.onBannerCancelled=function(t){ce(t),n.hidePrompt(t)},this.render=function(t){oe(Ut(Vn,{config:t,context:n.context,onBannerConfirm:n.onBannerConfirm,onBannerCancelled:n.onBannerCancelled}),n.ddlContainer.element)},this.ddlContainer=e.createContainer("ddl"),this.context=t,this.triggerFilter=new _e(t,(function(t){n.updateActiveConfigs(),n.setState(Zn.READY)})),this.setState(Zn.LOADING)}return t.prototype.hidePrompt=function(t){var e;this.activeConfigs=null===(e=this.activeConfigs)||void 0===e?void 0:e.filter((function(e){return e.uuid!==t.uuid})),this.setState(Zn.READY)},t.prototype.performClientRedirection=function(t){var e=t.uiActions.accept;switch(e.type){case T.DDL_OPEN_STORE:window.location.href=e.url;break;case T.DDL_OPEN_DEEPLINK:window.location.href=e.deepLinkUrl;break;default:console.error("DdlManager.performClientRedirection: Unsupported accept action type, unable to perform redirection")}},t.prototype.setState=function(t){this.onEnter(t)},t.prototype.onEnter=function(t){var e;return Xn(this,void 0,void 0,(function(){var n,r;return tr(this,(function(o){switch(o.label){case 0:switch(t){case Zn.LOADING:return[3,1];case Zn.READY:return[3,3]}return[3,5];case 1:return n=this,[4,this.loadConfig()];case 2:return n.config=o.sent(),this.config?(this.setState(Zn.READY),[3,5]):[2];case 3:return[4,this.updateActiveConfigs()];case 4:return o.sent(),(r=null===(e=this.activeConfigs)||void 0===e?void 0:e.shift())?(Yn(r,this.render)||this.render(r),[3,5]):(this.renderEmpty(),[2]);case 5:return[2]}}))}))},t.prototype.renderEmpty=function(){oe(null,this.ddlContainer.element)},t.prototype.updateActiveConfigs=function(){return Xn(this,void 0,void 0,(function(){var t=this;return tr(this,(function(e){switch(e.label){case 0:return this.config?[4,this.triggerFilter.filterPrompts(this.config)]:[2];case 1:return e.sent().forEach((function(e){var n;-1===(null===(n=t.activeConfigs)||void 0===n?void 0:n.indexOf(e))&&t.activeConfigs.push(e)})),[2]}}))}))},t.prototype.loadConfig=function(){return Xn(this,void 0,void 0,(function(){var t;return tr(this,(function(e){switch(e.label){case 0:return[4,yt(this.context)];case 1:return void 0===(t=e.sent())?[2]:[2,t.reduce((function(t,e){return t[e.uuid]=e,t}),{})]}}))}))},t}(),nr=er,rr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),or=function(t){function e(e){var n,r,o=this,i=null!==(r=null===(n=(o=t.call(this,e)||this).props.blurClass)||void 0===n?void 0:n.split(" "))&&void 0!==r?r:[];return i.push("kumulos-background-mask-blur"),o.state={blurClasses:i},o}return rr(e,t),e.prototype.updateBlurState=function(){this.state.blurClasses.forEach((function(t){document.body.classList.contains(t)||document.body.classList.add(t)}))},e.prototype.componentDidMount=function(){this.updateBlurState()},e.prototype.componentDidUpdate=function(){this.updateBlurState()},e.prototype.componentWillUnmount=function(){this.state.blurClasses.forEach((function(t){return document.body.classList.remove(t)}))},e.prototype.render=function(){var t=this.props,e=t.class,n=t.style,r=["kumulos-background-mask"];return e&&r.push(e),Ut("div",{style:n,class:r.join(" "),onClick:this.props.onClick},this.props.children)},e}(jt),ir=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRequestNativePrompt=function(){e.props.onPromptAccepted(e.props.config)},e}return ir(e,t),e.prototype.render=function(){var t,e,n,r,o,i,s,u="kumulos-prompt kumulos-prompt-".concat(this.props.promptManagerState," kumulos-bell-container kumulos-bell-container-").concat(this.props.config.position),a=this.props.config,c=a.position.indexOf("left")>-1?"right":"left",l=null===(e=null===(t=a.colors)||void 0===t?void 0:t.bell)||void 0===e?void 0:e.bg,p=null===(r=null===(n=a.colors)||void 0===n?void 0:n.bell)||void 0===r?void 0:r.fg,f={borderColor:p,backgroundColor:l};return Ut("div",{class:u},Ut("div",{class:"kumulos-bell-inner kumulos-tooltip-parent"},Ut("div",{class:"kumulos-bell",onClick:this.onRequestNativePrompt,style:f},Ut("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ut("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z",fill:p}))),Ut(Or,{position:c},null!==(s=null===(i=null===(o=a.labels)||void 0===o?void 0:o.tooltip)||void 0===i?void 0:i.subscribe)&&void 0!==s?s:Ar)))},e}(jt),ur=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(){return ar=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ar.apply(this,arguments)},cr={backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},lr=function(t){function e(e){var n=t.call(this,e)||this;return n.onRequestNativePrompt=function(){n.props.onPromptAccepted(n.props.config)},n.onRequestCancel=function(){n.props.onPromptDeclined(n.props.config)},n}return ur(e,t),e.prototype.render=function(){var t=this.props.config,e="kumulos-prompt kumulos-prompt-".concat(this.props.promptManagerState," kumulos-").concat(t.type,"-container kumulos-prompt-position-").concat(t.position),n=t.type===R.ALERT?t.labels.alert:t.labels.banner,r=n.heading,o=n.body,i=n.declineAction,s=n.acceptAction,u=t.type===R.ALERT?t.colors.alert:t.colors.banner,a=u.bg,c=u.fg,l=u.acceptActionBg,p=u.acceptActionFg,f={backgroundColor:a,color:c},h={backgroundColor:u.declineActionBg,color:u.declineActionFg},d={backgroundColor:l,color:p},v=ar(ar({},cr),{backgroundImage:"url(".concat(t.imageUrl,")")});return Ut("div",{style:f,className:e},t.imageUrl&&Ut("div",{style:v,className:"kumulos-".concat(t.type,"-icon")}),Ut("div",{className:"kumulos-".concat(t.type,"-content")},Ut("div",{className:"kumulos-".concat(t.type,"-header")},Ut("h1",null,r)),Ut("div",{className:"kumulos-".concat(t.type,"-body")},o)),Ut("div",{className:"kumulos-".concat(t.type,"-actions")},Ut("button",{type:"button",style:h,className:"kumulos-action-button kumulos-action-button-cancel",onClick:this.onRequestCancel},i),Ut("button",{type:"button",style:d,className:"kumulos-action-button kumulos-action-button-confirm",onClick:this.onRequestNativePrompt},s)))},e}(jt),pr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pr(e,t),e.prototype.render=function(){var t,e=this.props,n=e.promptState,r=e.prompt,o=e.subscriptionState;if(!r||"requesting"!==n||!r.overlay||"unsubscribed"!==o)return null;var i=r.overlay,s={background:i.colors.shade,color:i.colors.text};return Ut(or,{style:s,blurClass:"kumulos-overlay-blur",class:"kumulos-overlay kumulos-overlay-".concat(a())},Ut("div",{class:"kumulos-overlay-strip",style:{background:i.colors.strip}},Ut("div",{class:"kumulos-overlay-content-container"},Ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"65",height:"35",viewBox:"0 0 64 33"},Ut("path",{fill:"none",stroke:i.colors.text,"stroke-width":"2.5px","stroke-linecap":"round",d:"M 12.57,11.12\n           C 12.57,11.12 6.84,20.82 4.13,21.01\n             1.42,21.21 20.71,28.67 26.62,28.67M 4.23,21.01\n           C 4.23,21.01 53.96,14.91 60.65,3.47"})),i.iconUrl&&Ut("img",{src:i.iconUrl}),Ut("div",{class:"kumulos-overlay-content"},Ut("h3",null,i.labels.heading),Ut("p",null,i.labels.body),null===(t=i.links)||void 0===t?void 0:t.map((function(t){return Ut("a",{href:t.url,target:"_blank"},t.label)}))))))},e}(jt),hr=Math.PI/2,dr=50;function vr(t){var e,n,r,o,i,s,u,a,c=t.area,l=t.quadCurvePoints,p=t.color,f=l.p1,h=l.p2,d=l.p3,v="M ".concat(f.x," ").concat(f.y," Q ").concat(h.x," ").concat(h.y," ").concat(d.x," ").concat(d.y),m=(e=h,n=d,r=Math.atan2(e.x-e.x,n.y-n.y)+hr,o=Math.cos(r),i=-Math.sin(r),u=-(s={x:150*o,y:150*i}).x*dr,a=-i*dr,{p1:{x:Math.cos(r-hr)*dr+u,y:-Math.sin(r-hr)*dr+a},p2:s,p3:{x:Math.cos(r+hr)*dr+u,y:-Math.sin(r+hr)*dr+a}}),y=m.p1,b=m.p2,_=m.p3,g="M ".concat(d.x+y.x," ").concat(d.y+y.y," Q ").concat(d.x+b.x," ").concat(d.y+b.y," ").concat(d.x+_.x," ").concat(d.y+_.y),k={stroke:p,fill:"none"};return Ut("svg",{viewBox:"0 0 ".concat(c.width," ").concat(c.height),width:"".concat(c.width,"px"),height:"".concat(c.height,"px"),xmlns:"http://www.w3.org/2000/svg"},Ut("g",{"stroke-width":"3","stroke-linecap":"round",fill:"none","fill-rule":"evenodd"},Ut("path",{style:k,d:v}),Ut("path",{style:k,d:g})))}var mr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yr=function(){return yr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},yr.apply(this,arguments)},br={display:"flex",alignItems:"center",justifyContent:"center"},_r=0,gr=50,kr=-175,wr=75,xr=0,Sr=500,Pr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onBackgroundMaskClick=function(){var t=e.props,n=t.prompt,r=t.onDismiss;n&&r&&r(n)},e}return mr(e,t),e.prototype.componentWillMount=function(){var t=window.innerWidth,e=window.innerHeight;this.setState({windowDimensions:{width:t,height:e}})},e.prototype.render=function(){var t=this.props,e=t.promptState,n=t.prompt,r=t.subscriptionState;if(!n||"requesting-silent"!==e||!n.silentOverlay||"unsubscribed"!==r)return null;var o=n.silentOverlay,i=o.labels.body,s=o.colors.text,u=yr(yr({},br),{color:s});return Ut(or,{blurClass:"kumulos-overlay-blur",class:"kumulos-overlay kumulos-overlay-".concat(a()),style:u,onClick:this.onBackgroundMaskClick},this.renderPointer(s),Ut("p",{class:"kumulos-silent-overlay-content-text"},i))},e.prototype.renderPointer=function(t){var e=this.state.windowDimensions,n={x:e.width/2+_r,y:e.height/2+gr},r={x:e.width+kr,y:wr};return Ut("div",{class:"kumulos-silent-overlay-indicator"},Ut(vr,{area:e,quadCurvePoints:{p1:n,p2:{x:r.x+xr,y:n.y+Sr},p3:r},color:t}))},e}(jt),Er=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cr=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Ar="Subscribe for notifications";var Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Er(e,t),e.prototype.render=function(){return Ut("div",{class:"kumulos-tooltip kumulos-tooltip-".concat(this.props.position)},this.props.children)},e}(jt),Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Er(e,t),e.prototype.render=function(){return Ut("div",{class:"kumulos-toast"},this.props.message)},e}(jt),Tr=function(t){function e(e){var n=t.call(this,e)||this;return n.dequeueToast=function(){n.setState({toastQueue:n.state.toastQueue.slice(1)})},n.state={toastQueue:[]},n}return Er(e,t),e.prototype.showToast=function(t){t&&t.length&&(this.setState({toastQueue:Cr(Cr([],this.state.toastQueue,!0),[t],!1)}),setTimeout(this.dequeueToast,3200))},e.prototype.render=function(){return xn(Ut(Ft,null,this.maybeRenderPromptBackgroundMask(),this.props.prompts.map(this.renderPrompt,this),!m()&&Ut(fr,{promptState:this.props.promptManagerState,prompt:this.props.currentlyRequestingPrompt,subscriptionState:this.props.subscriptionState}),!m()&&Ut(Pr,{promptState:this.props.promptManagerState,prompt:this.props.currentlyRequestingPrompt,subscriptionState:this.props.subscriptionState,onDismiss:this.props.onDismissOverlay}),this.state.toastQueue.length>0&&Ut(Rr,{message:this.state.toastQueue[0]})),document.body)},e.prototype.maybeRenderPromptBackgroundMask=function(){if("requesting"===this.props.promptManagerState||"requesting-silent"===this.props.promptManagerState)return null;var t=this.props.prompts.filter((function(t){return(t.type===R.ALERT||t.type===R.BANNER)&&!!t.backgroundMask}))[0];if(!t)return null;var e={backgroundColor:t.backgroundMask.colors.bg};return Ut(or,{style:e})},e.prototype.renderPrompt=function(t){var e;if("requesting"===this.props.promptManagerState||"requesting-silent"===this.props.promptManagerState)return null;switch(t.type){case"bell":return Ut(sr,{config:t,subscriptionState:this.props.subscriptionState,promptManagerState:this.props.promptManagerState,onPromptAccepted:this.props.onPromptAccepted,onPromptDeclined:this.props.onPromptDeclined});case"alert":case"banner":var n=void 0;return t.type===R.ALERT&&(n=null===(e=t.actions)||void 0===e?void 0:e.find((function(t){return"userChannelSelectInline"===t.type}))),Ut(lr,{config:t,subscriptionState:this.props.subscriptionState,promptManagerState:this.props.promptManagerState,onPromptAccepted:this.props.onPromptAccepted,onPromptDeclined:this.props.onPromptDeclined,action:n});default:return null}},e}(jt),Dr=Tr,Nr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},Ir=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},Mr=function(){function t(t,e,n,r){var o=this;this.onEventTracked=function(t){t.type!==O.PUSH_UNSUBSCRIBED?"ready"===o.state&&o.evaluateTriggers():o.unregisteredEventTracked()},this.activateDeferredPrompt=function(t){o.promptActionNeedsTaken()&&(o.activatePrompt(t),o.render())},this.onRequestNativePrompt=function(t){return Nr(o,void 0,void 0,(function(){var e,n=this;return Ir(this,(function(r){switch(r.label){case 0:return"requesting"===this.state||"requesting-silent"===this.state?[2]:(this.currentlyRequestingPrompt=t,this.pushManager.isNativePromptShown().then((function(t){t?n.setState("requesting"):n.setState("requesting-silent")})),e=this,[4,this.pushManager.requestPermissionAndRegisterForPush(this.context)]);case 1:return e.subscriptionState=r.sent(),this.setState("ready"),[2]}}))}))},this.onPromptAccepted=function(t){return Nr(o,void 0,void 0,(function(){var e,n;return Ir(this,(function(r){switch(r.label){case 0:return"unsubscribed"!==this.subscriptionState?[3,2]:[4,this.onRequestNativePrompt(t)];case 1:r.sent(),r.label=2;case 2:return this.hideAndSuppressPrompts(t),"subscribed"===this.subscriptionState&&(null===(e=this.ui)||void 0===e||e.showToast(null===(n=t.labels)||void 0===n?void 0:n.thanksForSubscribing)),[2]}}))}))},this.onPromptDeclined=function(t){ce(t),o.hidePrompt(t)},this.onDismissOverlay=function(t){o.hidePrompt(t),o.setState("requesting-silent-dismissed")},this.prompts=null!=r?r:{},this.activePrompts=[],this.triggerFilter=new _e(t,this.onEventTracked),this.pushContainer=e.createContainer("push"),this.context=t,this.pushManager=n,this.setState("loading")}return t.prototype.unregisteredEventTracked=function(){return Nr(this,void 0,void 0,(function(){var t;return Ir(this,(function(e){switch(e.label){case 0:return this.activePrompts=[],t=this,[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 1:return t.subscriptionState=e.sent(),this.render(),[2]}}))}))},t.prototype.hideAndSuppressPrompts=function(t){var e=this,n=this.subscriptionState;this.hidePrompt(t),"unsubscribed"!==n&&this.activePrompts.forEach((function(t){return e.hidePrompt(t)}))},t.prototype.render=function(){var t=this;this.subscriptionState&&this.state&&oe(Ut(Dr,{ref:function(e){return t.ui=e},prompts:this.activePrompts,subscriptionState:this.subscriptionState,promptManagerState:this.state,onPromptAccepted:this.onPromptAccepted,onPromptDeclined:this.onPromptDeclined,onDismissOverlay:this.onDismissOverlay,currentlyRequestingPrompt:this.currentlyRequestingPrompt}),this.pushContainer.element)},t.prototype.evaluateTriggers=function(){return Nr(this,void 0,void 0,(function(){var t,e=this;return Ir(this,(function(n){switch(n.label){case 0:return[4,this.triggerFilter.filterPrompts(this.prompts,(function(t){return e.promptActionNeedsTaken()}))];case 1:return t=n.sent(),this.activatePrompts(t),[2]}}))}))},t.prototype.promptActionNeedsTaken=function(){return"unsubscribed"===this.subscriptionState&&"granted"!==Notification.permission},t.prototype.hidePrompt=function(t){var e=this.activePrompts.indexOf(t);this.activePrompts.splice(e,1),this.render()},t.prototype.activatePrompt=function(t){this.activePrompts.indexOf(t)>-1||this.activePrompts.push(t)},t.prototype.activatePrompts=function(t){for(var e=0;e<t.length;++e){var n=t[e];Yn(n,this.activateDeferredPrompt)||this.activatePrompt(n)}this.render()},t.prototype.setState=function(t){this.state=t,this.onEnter(t)},t.prototype.onEnter=function(t){return Nr(this,void 0,void 0,(function(){var e;return Ir(this,(function(n){switch(n.label){case 0:switch(t){case"loading":return[3,1];case"ready":return[3,3];case"requesting":case"requesting-silent":case"requesting-silent-dismissed":return[3,6]}return[3,7];case 1:return[4,this.pushManager.handleAutoResubscription(this.context)];case 2:return n.sent(),this.setState("ready"),[3,7];case 3:return this.currentlyRequestingPrompt=void 0,e=this,[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 4:return e.subscriptionState=n.sent(),[4,this.evaluateTriggers()];case 5:return n.sent(),this.render(),[3,7];case 6:return this.render(),[3,7];case 7:return[2]}}))}))},t}(),Ur=n(39),Lr={};Lr.styleTagTransform=Te(),Lr.setAttributes=Ce(),Lr.insert=Pe().bind(null,"head"),Lr.domAPI=xe(),Lr.insertStyleElement=Oe();ke()(Ur.A,Lr),Ur.A&&Ur.A.locals&&Ur.A.locals;var Fr=function(){function t(){var t=this;this.element=document.createElement("div"),this.element.id="kumulos-ui-root",this.containers=[],function(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)}((function(){return document.body.appendChild(t.element)}))}return t.prototype.createContainer=function(t){var e={name:t,element:document.createElement("div")};return e.element.id="kumulos-ui-root-".concat(t),this.element.appendChild(e.element),this.containers.push(e),e},t}(),jr=Fr,Hr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},Br=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},qr=function(){function t(t,e,n){var r=this;this.onWorkerMessage=function(t){var e,n;if(t.origin===location.origin&&(void 0!==(n=t.data).type&&void 0!==j[n.type]&&t.data.type===j.KPushReceived)){var o=pt(t.data.data);null===(e=r.onPushReceived)||void 0===e||e.call(r,o)}},this.context=t,this.config=e,this.pushManager=n,this.rootFrame=new jr}return t.buildInstance=function(e){return Hr(this,void 0,void 0,(function(){var n,r;return Br(this,(function(o){switch(o.label){case 0:return function(t,e){if(void 0===e&&(e=!1),"object"!=typeof t)throw"Config must be an object";var n=Array.isArray(t.features)&&t.features.length?t.features:void 0;if(e&&!t.tenantId)throw"tenantId is missing";if(!n||n.includes(I.PUSH))return function(t){for(var e=0,n=["region"];e<n.length;e++){var r=n[e];if("string"!=typeof t[r]||0===t[r].length)throw"Required configuration key '".concat(r,"' must be non-empty string")}if(t.serviceWorkerPath&&"string"!=typeof t.serviceWorkerPath&&0===t.serviceWorkerPath.length)throw"Optional configuration key 'serviceWorkerPath' must be non-empty string (if supplied)";if(t.onPushReceived&&"function"!=typeof t.onPushReceived)throw"Optional configuration key 'onPushReceived' must be a function";if(t.onPushOpened&&"function"!=typeof t.onPushOpened)throw"Optional configuration key 'onPushOpened' must be a function"}(t);if(!t.apiKey||!t.secretKey||!t.vapidPublicKey)throw"Keys are missing"}(e,!0),n=new F(e),[4,t.maybePersistInstallIdAndUserId(n,e)];case 1:return o.sent(),(r=new t(n,e,function(t){if(ot)return ot;var e=a();return ot="safari"!==e||"PushManager"in window?new st:new $(t.safariPushId)}(n))).initialize(),[2,r]}}))}))},t.prototype.initialize=function(){var t;S("config",{region:(t=this.config).region,apiKey:t.apiKey,secretKey:t.secretKey,vapidPublicKey:t.vapidPublicKey,serviceWorkerPath:t.serviceWorkerPath,autoResubscribe:t.autoResubscribe,tenantId:t.tenantId}),function(t,e){U(this,void 0,void 0,(function(){var n,r,o,i,s,u,a;return L(this,(function(c){switch(c.label){case 0:n=e||"2.0.17",r={app:{bundle:location.host,version:"0.0.0",target:2},sdk:{id:104,version:n},runtime:{id:8,version:navigator.userAgent},os:{id:0,version:"0.0.0"},device:{name:navigator.userAgent,tz:"undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||null,isSimulator:!1,locale:navigator.language}},o="",c.label=1;case 1:return c.trys.push([1,3,,4]),[4,B()];case 2:return o=c.sent(),[3,4];case 3:return i=c.sent(),console.error("Failed to get install ID: ",i),[2,Promise.reject(i)];case 4:s=[o,n,r.app.bundle,r.device.tz,r.device.locale,r.device.name],u=p(s.join("|")),c.label=5;case 5:return c.trys.push([5,7,,8]),[4,x("detailsHash")];case 6:return c.sent()===u?[2,Promise.resolve()]:[3,8];case 7:return a=c.sent(),[2,Promise.reject(a)];case 8:return[2,K(t,O.INSTALL_TRACKED,r).then((function(){return S("detailsHash",u)})).then((function(){}))]}}))}))}(this.context,this.config.sdkVersion),this.context.hasFeature(I.PUSH)&&this.initializePushFeature(),this.context.hasFeature(I.DDL)&&this.initializeDDLFeature()},t.prototype.initializePushFeature=function(){return Hr(this,void 0,void 0,(function(){return Br(this,(function(t){return lt(this.context),function(t){ut(this,void 0,void 0,(function(){var e,n;return at(this,(function(r){switch(r.label){case 0:if(!("serviceWorker"in navigator))return console.error("ServiceWorker is not supported in this browser, aborting..."),[2];e=v(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.serviceWorker.register(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:return[2]}}))}))}(this.context.serviceWorkerPath),navigator.permissions&&this.observePermissionStatus(),this.promptManager=new Mr(this.context,this.rootFrame,this.pushManager,this.config.platformConfig.prompts),[2]}))}))},t.prototype.observePermissionStatus=function(){return Hr(this,void 0,void 0,(function(){var t=this;return Br(this,(function(e){switch(e.label){case 0:return[4,navigator.permissions.query({name:"notifications"})];case 1:return e.sent().addEventListener("change",(function(e){return Hr(t,void 0,void 0,(function(){var t;return Br(this,(function(n){return t=e.target,"granted"===t.state?this.pushManager.attemptPushRegister(this.context):this.pushManager.pushUnsubscribe(this.context),[2]}))}))})),[2]}}))}))},t.prototype.initializeDDLFeature=function(){m()&&(this.ddlManager=new nr(this.context,this.rootFrame))},t.prototype.maybeAddMessageEventListenerToSW=function(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",this.onWorkerMessage)},t.maybePersistInstallIdAndUserId=function(t,e){return Hr(this,void 0,void 0,(function(){return Br(this,(function(n){switch(n.label){case 0:return[4,B().then((function(t){if(t!==e.originalVisitorId)return q(e.originalVisitorId)}))];case 1:return n.sent(),void 0===e.customerId?[2]:[4,z().then((function(n){if(n!==e.customerId)return W(t,e.customerId)}))];case 2:return n.sent(),[2]}}))}))},t.prototype.associateUser=function(t,e){return W(this.context,t,e)},t.prototype.signOutUser=function(){return function(t){return U(this,void 0,void 0,(function(){var e;return L(this,(function(n){switch(n.label){case 0:return[4,z()];case 1:return e=n.sent(),K(t,O.USER_ASSOCIATION_CLEARED,{oldUserIdentifier:e}),[2,P("userId")]}}))}))}(this.context)},t.prototype.trackEvent=function(t,e){return K(this.context,t,e).then((function(t){}))},t.prototype.getPushSubscriptionStatus=function(t){return Hr(this,void 0,void 0,(function(){var e;return Br(this,(function(n){switch(n.label){case 0:return[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 1:return e=n.sent(),t(e),[2]}}))}))},t.prototype.pushRegister=function(){return Hr(this,void 0,void 0,(function(){return Br(this,(function(t){switch(t.label){case 0:return[4,this.pushManager.requestNotificationPermission(this.context)];case 1:return"granted"!==t.sent()?[2,Promise.reject("Notification permission not granted")]:(this.pushManager.pushRegister(this.context),[2])}}))}))},t.prototype.pushUnregister=function(){return Hr(this,void 0,void 0,(function(){return Br(this,(function(t){switch(t.label){case 0:return[4,this.pushManager.pushUnregister(this.context)];case 1:return t.sent(),[2]}}))}))},t.prototype.setPushOpenedListener=function(t){this.onPushOpened=t,this.maybeFireOpenedHandler()},t.prototype.setPushReceivedListener=function(t){this.onPushReceived=t,this.maybeAddMessageEventListenerToSW()},t.prototype.setPushSubscriptionStateListener=function(t){return Hr(this,void 0,void 0,(function(){var e;return Br(this,(function(n){switch(n.label){case 0:return e=t,[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 1:return e.apply(void 0,[n.sent()]),this.context.subscribeToSubscriptionStatus(t),[2]}}))}))},t.prototype.maybeFireOpenedHandler=function(){var t;return Hr(this,void 0,void 0,(function(){var e,n;return Br(this,(function(r){switch(r.label){case 0:return[4,A()];case 1:return(e=r.sent())?(n=pt(e),null===(t=this.onPushOpened)||void 0===t||t.call(this,n),[2]):[2]}}))}))},t}(),zr=qr,Wr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},Kr=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};!function(){var t;Wr(this,void 0,void 0,(function(){var e,n,r,o,i;return Kr(this,(function(u){switch(u.label){case 0:return(null===(t=window.Kumulos)||void 0===t?void 0:t.q)?(e=window.Kumulos.q,2!==(null==(n=e.find((function(t){return"init"===t[0]})))?void 0:n.length)?[2]:((a=null!=(a=n[1].features)?a:[]).length||a.push(I.PUSH),a.filter((function(t){return s[t]()})).length>0?("https:"!==location.protocol&&console.warn("Optimobile: this page is not served over HTTPS, some features may be unavailable..."),[4,zr.buildInstance(n[1])]):(console.warn("Optimobile: this browser does not support all required features, aborting initialization..."),[2]))):[2];case 1:for(r=u.sent(),o=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];try{"function"==typeof t?t(r):(e=r)[t].apply(e,n)}catch(t){console.error(t)}},i=0;i<e.length;++i)"init"!==e[i][0]&&o.apply(void 0,e[i]);return window.Kumulos=o,[2]}var a}))}))}()}()}();